# Managing Computer Systems
## Literature
* Essential System administration O'Reilly,2002 - Frisch, Ae.
* Unix and Linux system administration handbook - Nemeth, E. Addison 2017
* Doleželová, M., Muehlfeld, M., Svistunov, M., Wadeley, S., Čapek, T., Hradílek, J., Silas, D., Heves, J., Kovář, P., Ondrejka, P., Bokoč, P., Prpič, M., Slobodová, E., Kopalová, E., Svoboda, M., O'Brien, D., Hideo, M., Domingo, D. & Ha, J. System administrator's guide. (Red Hat, 2018)
* Aoki, O. Debian reference. (Debian, 2018).
* The FreeBSD documentation project. FreeBSD handbook. (FreeBSD, 2018.)
* How Linux Works, 3rd Edition: What Every Superuser Should Know 3rd Edition, Brian Ward
* [How to properly document software?](https://www.doxygen.nl/manual/index.htm)
* [How to properly document systems?](https://group.miletic.net/hr/nastava/materijali/upravljanje-dokumentacijom-racunalnih-sustava-i-mreza/)
    * MkDocs - Markdown or VS Code with markdownlint extension    

**.markdownlint.json example:**
```json
{
 "MD007" : { "indent": 4 },
 "MD014" : false
}
```

## MD document example:
e-Mail server is configured on IP: 10.27.45.11.
```python
print("hello")
```

URL's and lists:
+ [www.miletic.net](https://www.miletic.net/) ili <https://www.miletic.net>
+ a
+ b
    + a
    + b
        1. third
        1. one more

Code:
```shell
$ ls
```
Graph (Graphviz):
```graphviz
a -> b;
```
Quoting:
> Registering and Subscribing Your System
    Register your system:
    ~]# `subscription-manager register`
    The command will prompt you to enter your Red Hat Customer Portal user name
    and password.
    Determine the pool ID of a subscription that you require:
    ~]# `subscription-manager list --available`
    This command displays all available subscriptions for your Red Hat account.
    For every subscription, various characteristics are displayed, including the
    pool ID.
    Attach the appropriate subscription to your system by replacing pool_id with
    the pool ID determined in the previous step:
    ~]# `subscription-manager attach --pool=pool_id`
For more information on registration of your system and attachment of the Red
Hat Content Delivery Network subscriptions, see Chapter 7, Registering the
System and Managing Subscriptions.

+ [source](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/system_administrators_guide/ch-getting_started#sec-Networking-Cockpit)


Single quotes about everything that appears on the screen!
MD can be versioned on GitHub!

Good practice for System Administrators is to use Password Managers e.g. KeepassXC while ensuring that the password length is 12 or more different characters (or let the Password Manager auto generate the password).

## Graph
VS Code extension: Graphviz Markdown Preview v0.0.8 or Mermaid

# Cloud-config
[ArchLinux VM Img Cloud-init ready](https://gitlab.archlinux.org/archlinux/arch-boxes/-/jobs/50048/artifacts/file/output/Arch-Linux-x86_64-cloudimg-20220310.50048.qcow2)
[SSH](https://www.ssh.com/academy/ssh/keygen)
[QEMU](https://wiki.archlinux.org/title/QEMU#Network)
[Cloud-Init](https://wiki.archlinux.org/title/Cloud-init)

## Cloud-config for a virtual machine:
## What is a virtual machine?
According to vmware documentation:
>A Virtual Machine (VM) is a compute resource that uses software instead of a physical computer to run programs and deploy apps. One or more virtual “guest” machines run on a physical “host” machine.

According to Wikipedia:
>Virtual machine (VM) is the virtualization/emulation of a computer system. Virtual machines are based on computer architectures and provide functionality of a physical computer. Their implementations may involve specialized hardware, software, or a combination. 
## How to create and setup a virtual machine?
**1. Generate SSH key:**
```shell
ssh-keygen -t rsa -b 4096 ssh-keygen -t dsa 
ssh-keygen -t ecdsa -b 521
```
**2. Create user-data and meta-data files:**

**Basic user-data with SSH key authentication:**
```shell
#cloud-config
users:
  - name: fidit
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDZWfY7BinoB43gEXhlyvd97Yo9tKHpmx/+J0dkdyVSgX3fFlmMBpfulc7WsZ7tw3BOCgFPVHlX7awGylDmff3HE2+CntQuV0vwhqJ28yRu3LvxPm6Q4wbk+lNBO7qOg8wDroE0z0ikNg+DgqqJLXhPxX0R1lawZ0Vf+cL+M56roCMZl0CZy7TuZFcBCpEb/F5ipGQehVQVuixkA7G45+R5i7x8rZbi7wztS7oYzsgNKO/z66w4xVujLf2eMaIYEL2p7/CGc3U+nNULEUTwdJ6NsBmb2lv5HfRPrmmvIxJTSNMBEdVd2fhikFkfpzGyuKwy7p8iNRkQICURC+qEOEi4HYZvYtLsSeee0GQ5P0jTMp2Ya5vVhrz0fVn4byW8esOob7eiUX3E75iwtzUUmNLN8cuCZOhSTUlcqqJMYA701CJegWNDQw0f7lKvtvwFcuscK0+g80x8rXTngiLNTCXwVAFgSoRtI7RlQJcMOo9Z91P/NT3adC6I2G4Btmgoe+0= korisnik@ODJ-O365-117

```

**Basic user-data s with SSH key authentication for root and specific user:**
```shell
#cloud-config
users:
  - name: myuser
    ssh_authorized_keys:
    - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDZWfY7BinoB43gEXhlyvd97Yo9tKHpmx/+J0dkdyVSgX3fFlmMBpfulc7WsZ7tw3BOCgFPVHlX7awGylDmff3HE2+CntQuV0vwhqJ28yRu3LvxPm6Q4wbk+lNBO7qOg8wDroE0z0ikNg+DgqqJLXhPxX0R1lawZ0Vf+cL+M56roCMZl0CZy7TuZFcBCpEb/F5ipGQehVQVuixkA7G45+R5i7x8rZbi7wztS7oYzsgNKO/z66w4xVujLf2eMaIYEL2p7/CGc3U+nNULEUTwdJ6NsBmb2lv5HfRPrmmvIxJTSNMBEdVd2fhikFkfpzGyuKwy7p8iNRkQICURC+qEOEi4HYZvYtLsSeee0GQ5P0jTMp2Ya5vVhrz0fVn4byW8esOob7eiUX3E75iwtzUUmNLN8cuCZOhSTUlcqqJMYA701CJegWNDQw0f7lKvtvwFcuscK0+g80x8rXTngiLNTCXwVAFgSoRtI7RlQJcMOo9Z91P/NT3adC6I2G4Btmgoe+0= korisnik@ODJ-O365-117
  - name: root
    ssh_authorized_keys:
    - ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBAA5J/SRFcYnps9vCQQwnsXquEeKt9R7/7Ab6YovEoU5nE1vUSFHXoBNPhIXKOJU8G2pGi9nMFS27z9B7+oyLPTQhwFFbUOoG+/jTrc4CHy+b2rdx7x1CbR4fQSsgC/t0g+z05o9jar/t0Lea6/6hIAM2uGh+KGiKzGT/aug2VBU3SvcbQ== korisnik@ODJ-O365-117

```
**3. Generate cloud-init.iso:**
```shell
xorriso -as genisoimage -output cloud-init.iso -volid CIDATA -joliet -rock user-data meta-data
```
**4. Create a virtual machine:**
4.1. Expand ArchLinux disk image if you need more space:
```shell
qemu-img resize aarch.qcow2 +10G
```
4.2. Create a virtual machine
```shell
qemu-system-x86_64 -m 512M aarch.qcow2 -cdrom cloud-init.iso -nic user,hostfwd=tcp::60022-:22
```
4.3. Add port for acessing the virtual machine from host PC:
```shell
ssh-keygen -f "/home/korisnik/.ssh/known_hosts" -R "[localhost]:60022"
```
**5. Connect to the virtual machine:**
```shell
ssh -v -p 60022 fidit@localhost
ssh -v -p 60022 root@localhost
```
